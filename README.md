ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€å‚æœ¬ã‚¿ã‚¯ãƒè‘—ã€Rubyã§ã¯ã˜ã‚ã‚‹ã‚·ã‚¹ãƒ†ãƒ ãƒˆãƒ¬ãƒ¼ãƒ‰ã€ã®ãŸã‚ã«æ›¸ã‹ã‚ŒãŸã‚‚ã®ã§ã™ã€‚æœ¬æ›¸ã«æ²¿ã£ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã™ã‚‹éš›ã€ã©ã†ã—ã¦ã‚‚å‹•ã‹ãªã„ã€ãªã©ã®ãƒˆãƒ©ãƒ–ãƒ«ã«ã‚ã£ãŸå ´åˆã«ã”è¦§ãã ã•ã„ã€‚å‹•ä½œç’°å¢ƒãªã©ã«ã¤ã„ã¦ã¯ã€æœ¬æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ã“ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã«åã‚ã‚‰ã‚Œã¦ã„ã‚‹ã®ã¯ã€trade_simulator ãƒ•ã‚©ãƒ«ãƒ€å†…ã® lib ãƒ•ã‚©ãƒ«ãƒ€ã‚„ bin ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ æœ¬ä½“ã®ã‚³ãƒ¼ãƒ‰ã¨ã€check ãƒ•ã‚©ãƒ«ãƒ€å†…ã®å‹•ä½œç¢ºèªç”¨ã®ã‚³ãƒ¼ãƒ‰ã€ãã—ã¦ setting ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚data ãƒ•ã‚©ãƒ«ãƒ€ã¨ result ãƒ•ã‚©ãƒ«ãƒ€ã¯ç©ºã«ãªã£ã¦ã„ã¾ã™ã€‚

bin ãƒ•ã‚©ãƒ«ãƒ€å†…ã®å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚„ check ãƒ•ã‚©ãƒ«ãƒ€å†…ã®å‹•ä½œãƒã‚§ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã€å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ãŒãªã„ã€ãªã©ã®ç†ç”±ã§ã“ã®ã¾ã¾ã§ã¯å‹•ä½œã—ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚æœ¬æ›¸ã‚’ç†Ÿèª­ã®ä¸Šã€é †ç•ªã«æ¼”ç¿’ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

ã“ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å†…ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ä¸­ã«ã¯ã€æ›¸ç±ã«æ²è¼‰ã—ãŸã‚‚ã®ã¨è¦‹ã‹ã‘ã®é•ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€ç´™å¹…ã®åˆ¶é™ã«ã‚ˆã‚Šæœ¬æ–‡ã§ã¯ã‚„ã‚€ã‚’å¾—ãšè¤‡æ•°è¡Œã«åˆ†ã‘ã¦æ›¸ã„ãŸã¨ã“ã‚ã‚’ã€ã‚ˆã‚Šè‡ªç„¶ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚‹ã‚ˆã†ã«ã€1è¡Œã«ã¾ã¨ã‚ãŸéƒ¨åˆ†ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚è¦‹ã‹ã‘ã¯é•ã£ã¦ã‚‚ã€æ„å‘³ã‚„å‹•ä½œã¯ã¾ã£ãŸãåŒã˜ã§ã™ã€‚


ä½¿ã„æ–¹

ãƒ»æ ªä¾¡ãƒªã‚¹ãƒˆã‚’å–å¾—ã™ã‚‹
ruby binÂ¥make_stock_list.rb

ãƒ»æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
ruby binÂ¥get_price_data.rb

ãƒ»æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹
ruby binÂ¥update_price_data.rb

ãƒ»å…¨ä½“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã™ã‚‹
ruby binÂ¥simulate.rb è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å

ãƒ»1éŠ˜æŸ„ã ã‘ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã™ã‚‹
ruby binÂ¥simulate.rb è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰

[å‚æœ¬ã‚¿ã‚¯ãƒã«ãªã‚‹æ–¹æ³•](https://sakamototakuma.blogspot.com/)

ğŸ”¹ğŸ”¹ğŸ”¹

è£œè¶³: ä¸Šè¨˜ã®å–å¾—ã€æ›´æ–°ç³»ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(binãƒ•ã‚©ãƒ«ãƒ€ã®3ãƒ•ã‚¡ã‚¤ãƒ«)ã¯ã€ç¾åœ¨ã‚µã‚¤ãƒˆã®æ§‹é€ ãŒå¤‰åŒ–ã—ãŸã®ã§å‹•ä½œã—ãªã„ã€‚

æ ªä¾¡ãƒªã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä»•æ§˜, pp. 170

ãƒ•ã‚¡ã‚¤ãƒ«åã¯tosho_list.txt
```csv
1301,æ±è¨¼PRM,100
```

æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ä»•æ§˜, pp. 263

å€¤ã¯æ•´æ•°, èª¿æ•´å¾Œçµ‚å€¤ã¯ä½¿ç”¨ã›ãš, ãƒ•ã‚¡ã‚¤ãƒ«åã¯1301.txt
æ—¥ä»˜ã¯2010-01-04ã®å½¢å¼ã§ã‚‚OK
```csv
2010/01/04,185,187,184,187,86000,187
```

å‡ºç‰ˆæ™‚ç‚¹2014-06-02ã‹ã‚‰ã®å¸‚å ´ã®å¤‰åŒ–(2025-03-03æ™‚ç‚¹)

1. codeã¯éæ•´æ•°
2. å‘¼å€¤ã¯å°æ•°ç‚¹ä»¥ä¸‹ã€å˜ä½æ ªã¯100æ ªã«çµ±ä¸€
3. æ±è¨¼1éƒ¨, 2éƒ¨ã¯å»ƒæ­¢
ref: [å‘¼å€¤ã®å˜ä½ | å†…å›½æ ªã®å£²è²·åˆ¶åº¦ | æ—¥æœ¬å–å¼•æ‰€ã‚°ãƒ«ãƒ¼ãƒ—](https://www.jpx.co.jp/equities/trading/domestic/07.html)

[æ ªå¼å£²è²·ã®æ³¨æ–‡ã€ç´°ã‹ã„é‡‘é¡ã§ã‚‚æ–°ãŸã«400éŠ˜æŸ„ã‚’å¯¾è±¡ã€æŠ•è³‡å®¶ã®åˆ©ä¾¿æ€§å‘ä¸Š ï½œ æ—¥æœ¬çµŒæ¸ˆæ–°è é›»å­ç‰ˆç‰¹é›†](https://ps.nikkei.com/jpx2306/index.html)

æ¬¡ã®ç’°å¢ƒã§å‹•ã‹ã™ãŸã‚ã«ã‚„ã£ãŸã“ã¨
```bash
$sw_vers
ProductName:            macOS
ProductVersion:         15.3
BuildVersion:           24D60
$ruby -v
ruby 3.2.2 (2023-03-30 revision e51014f9c0) [arm64-darwin22]
```
Work Around:
1. coding: Windows-31J, removed
2. win32ole @pan_database_to_stock.rbâ–¶ï¸require @simlate.rb, Comment out

å‹•ã‹ã—ãŸçµæœ(result/8604.csv)
```bash
$ruby bin/simulate.rb setting/estrangement.rb 8604
```

```csv
å–å¼•ç¨®åˆ¥,å…¥æ—¥ä»˜,å…¥å€¤,æ•°é‡,åˆæœŸã‚¹ãƒˆãƒƒãƒ—,å‡ºæ—¥ä»˜,å‡ºå€¤,æç›Š(å††),Rå€æ•°,%æç›Š,æœŸé–“
short,2010-08-11,514,1000,529,2010-08-13,496,18000,1.2,3.501945525291829,3
short,2010-10-15,450,1000,467,2010-10-18,422,28000,1.6470588235294117,6.222222222222222,2
short,2010-11-15,464,1000,480,2010-11-18,479,-15000,-0.9375,-3.2327586206896552,4
long,2011-02-01,506,1000,493,2011-02-03,516,10000,0.7692307692307693,1.9762845849802373,3
```

å‹•ä½œç¢ºèªã¯pp. 519, 18-3å‹•ä½œãƒã‚§ãƒƒã‚¯ã«è¨˜è¼‰ã®ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã—pp. 523ã«è¨˜è¼‰ã®çµæœãŒå¾—ã‚‰ã‚Œã‚‹äº‹ã®å¯å¦ã§è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚
see result/estrangement/test_simulation/
```bash
$ ruby check/trading_system_check.rb
```
å‹•ä½œãƒã‚§ãƒƒã‚¯ã‚³ãƒ¼ãƒ‰ã®å£²è²·ãƒ«ãƒ¼ãƒ«, pp. 474ã¨ã‚³ãƒ¼ãƒ‰ã®è¨˜è¼‰
1. 20æ—¥ç§»å‹•å¹³å‡ã‹ã‚‰ã®ä¹–é›¢ç‡ãŒ5%ã‚’è¶…ãˆã‚‹ã¨è²·ã„
2. è²·ã„æŒã¡ã®çŠ¶æ…‹ã§20æ—¥ç§»å‹•å¹³å‡ã‹ã‚‰ã®ä¹–é›¢ç‡ãŒ3%ä»¥å†…ã«æˆ»ã‚‹ã¨ãƒã‚¸ã‚·ãƒ§ãƒ³è§£æ¶ˆ
3. 20æ—¥å˜ç´”ATRã«å€ç‡1ã‚’æ›ã‘ã¦ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ã¨ã™ã‚‹
4. 30æ—¥ç§»å‹•å¹³å‡ãŒä¸Šå‘ãã®æ™‚ã®ã¿è²·ã„ã«å…¥ã‚‹

ATRã«ã¤ã„ã¦
1. Rangeã¯é«˜å®‰ã®å¹…
2. True Rangeã¯å‰æ—¥çµ‚å€¤ã‚’é«˜å®‰ã«æ··ã˜ãˆã¦ç®—å‡ºã™ã‚‹Range
3. Average True Rangeã¯True Rangeã®ç§»å‹•å¹³å‡
e.g.
å‰å‰æ—¥ã®çµ‚å€¤500, å‰æ—¥é«˜å®‰ãŒ520, 510ãªã‚‰TRã¯20(520 - 500)
ATRã‚’ä½¿ã£ãŸã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ã¨ã¯å½“æ—¥480ã‚’ä¸‹å›ã£ãŸã‚‰ä¹–é›¢ç‡ã®å¦‚ä½•ã«ã‚ˆã‚‰ãšãƒã‚¸ã‚·ãƒ§ãƒ³è§£æ¶ˆ

SQLite3å¯¾å¿œç‰ˆä½œæˆã«å‰ç«‹ã¡æ°—ä»˜ã„ãŸäº‹
1. def market(index), text_to_stock.rb, ã‚·ãƒ³ãƒœãƒ«ã‚’è¿”ã™å¿…è¦ã¯ç„¡ã„
2. to_i -> to_f, text_to_stock.rb
3. å£²è²·ãƒ«ãƒ¼ãƒ«(e.g. estrangement.rb)ã«ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹(Text or Pan)ã‚’è¨˜è¼‰
4. Simulationã‚¯ãƒ©ã‚¹ã¯lib/simulation.rb, bin/simulation.rbã®2ç®‡æ‰€ã§å®šç¾©ã•ã‚Œã¦ã‚‹
